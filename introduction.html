<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title></title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">IMC CytoMine pipeline</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-cog"></span>
     
    Introduction
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="preprocessing.html">Preporcessing</a>
    </li>
    <li>
      <a href="visualization.html">Visulaization</a>
    </li>
    <li>
      <a href="clustering.html">Cell Clustering /Cell subset Detection</a>
    </li>
    <li>
      <a href="discovery.html">Discovery</a>
    </li>
  </ul>
</li>
<li>
  <a href="Tutorial.html">
    <span class="fa fa-book"></span>
     
    Tutorial
  </a>
</li>
<li>
  <a href="Helpful_links.html">
    <span class="fa fa-ambulance"></span>
     
    Helpful Links
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/WCMCBioinformatics/CyTOF">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">




</div>


<p><br class="long"/></p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The following CyTOF analysis pipeline called <b>cytoMine</b> is developed by the IMC bioinformatics platform and utilizes state-of-the art existing R packages and custom code. The goal of this pipeline is to provide a simple interface for users to visualize their FCS files, transform, visualize and cluster their mass cytometry data.</p>
<p><br></p>
</div>
<div id="input-files" class="section level1">
<h1>Input files</h1>
<p>This pipeline requires .FCS files as a starting input. You can provide a single or multiple .FCS files as input. If multiple files are provided, the pipeline will either concatenate them or keep them as separate files and process them separately.</p>
<p><br></p>
</div>
<div id="pipleline-structure" class="section level1">
<h1>Pipleline Structure</h1>
<p><br></p>
<ul>
<li><p><a href="preprocessing.html">Preprocessing</a></p>
<ul>
<li><a href="preprocessing.html">Normalization</a></li>
<li><a href="preprocessing.html">Debarcoding</a></li>
<li><a href="processing.html#rand">Randomize 0 values between -1 and 0</a></li>
<li>Transformations</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li>Visualize
<ul>
<li>Basic plots for cell counts per sample, density plots for markers and PCA</li>
<li>Plot markers for inspection</li>
<li>t-SNE</li>
<li>t-SNE with different marker expressions</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Cell Clustering - automated</p>
<ul>
<li>FlowSOM</li>
<li>ClusterX</li>
</ul></li>
</ul>
<p><br></p>
<ul>
<li><p>Discovery</p>
<ul>
<li>Biomarker discovery :Differential expression analysis (edgeR)</li>
<li>Cell Progression: ISOMAPS (In progress)</li>
</ul></li>
</ul>
<p><br></p>
</div>
<div id="usage" class="section level1">
<h1>Usage</h1>
<p>All commands in this pipeline can be run on the Snyder console. Each command is structured in the following way:</p>
<pre><code>COMMAND ( COMPULSARY Inputs) [OPTIONAL Inputs]</code></pre>
<p><br/></p>
<p>All inputs which are compulsory are shown inside the parentheses and optional inputs to a command are shown in square brackets. For optional inputs, default values are provided and can be seen by typing:</p>
<pre><code>cytoMine --help</code></pre>
<p><br/></p>
<p>Here is an example for the catalyst command used for bead normalization</p>
<pre><code> cytoMine (--inputDir=&lt;directory&gt; --outputDir=&lt;directory&gt; --mode=&lt;exMode&gt;)  [--beadMasses=&lt;beads&gt;]</code></pre>
<p>In this example, –inputFiles , –outputDir and –mode are compulsory parameters while to run bead normalization beadMasses is also needed.</p>
<p><br/></p>
<p>An example of how to perform normalization on an fcs files</p>
<pre><code>cytoMine  --inputDir=data --beadMasses=140,151,153,165,175 --outputDir=results --mode=full
</code></pre>
</div>
<div id="modes" class="section level1">
<h1>Modes</h1>
<p>cytoMine is developed so users can do different level of pipeline executions and do not have to wait for the full pipeline to run if they just wanted some very basic plots to understand their data. For this purpose, cytoMine has four working modes</p>
<div id="modechannels" class="section level2">
<h2>–mode=channels</h2>
<p>In this mode, a user can find out how the channels are named/described in their fcs files. This is important because the marker list that the user input must match the names given in the description parameter of the fcs file.</p>
<div id="an-example-of-how-to-run-this-mode-is" class="section level3">
<h3>An example of how to run this mode is:</h3>
<pre><code>cytoMine  --inputDir=data --outputDir=results --mode=channels
</code></pre>
<p>A Channels.csv file is stored in the outputDir for quick look.</p>
</div>
</div>
<div id="modebasic" class="section level2">
<h2>–mode=basic</h2>
<p>In the basic mode, only the very basic plots are generated to give the user idea about their data.</p>
<div id="an-example-of-how-to-run-this-mode-is-1" class="section level3">
<h3>An example of how to run this mode is:</h3>
<pre><code>cytoMine  --inputDir=data --outputDir=results --mode=basic
</code></pre>
<p>The output is saved in the basicPlots folder in outputDir</p>
<table style="width:74%;">
<colgroup>
<col width="13%" />
<col width="59%" />
</colgroup>
<thead>
<tr class="header">
<th>Filename</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>counts_plot.png</td>
<td>barplots of cell counts in each sample file</td>
</tr>
<tr class="even">
<td>density_plot.png</td>
<td>Density plots for each marker in the marker list for each sample</td>
</tr>
<tr class="odd">
<td>PCA_plot.png</td>
<td>PCA plots for samples</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="modefull" class="section level2">
<h2>–mode=full</h2>
<p>In this mode the whole cytoMine pipeline is executed. All the results are saved in the outputDir folder or appropriate subfolders. All the data is also stored in an R object called cytoMine.RDATA. This is used if the user wants to re-run the code for expert annotated re-clustering/merging of the data.</p>
<pre><code>cytoMine  --inputDir=data --outputDir=results --mode=full
</code></pre>
</div>
<div id="modemergeclusters" class="section level2">
<h2>–mode=mergeClusters</h2>
<p>This mode is used only after the cytoMine pipeline has been executed in the full mode first. This mode is used to re-assign or merge clusters generated by FLOWSOM or ClusterX.</p>
<div id="an-example-of-invoking-mergecluster-mode-with-flowsom-merging-of-clusters" class="section level3">
<h3>An example of invoking mergeCluster mode with FlowSOM merging of clusters</h3>
<pre><code>cytoMine  --inputDir=data --outputDir=results --mode=mergeCluster --reclustFSFile=merge_cluster.csv
</code></pre>
</div>
</div>
</div>
<div id="required-inputfiles" class="section level1">
<h1>Required InputFiles</h1>
<p>All required inputFiles mentioned bellow should be in the inputDir. Default name for each file are provided. Please be consistent with the file format.</p>
<table style="width:74%;">
<colgroup>
<col width="13%" />
<col width="59%" />
</colgroup>
<thead>
<tr class="header">
<th>Filename</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="examples/sample_info.csv">sample_info.csv</a></td>
<td>This file holds information about your filenames, grouping, type etc</td>
</tr>
<tr class="even">
<td><a href="examples/marker_list.csv">marker_list.csv</a></td>
<td>This file holds information about the markers of interest</td>
</tr>
<tr class="odd">
<td><a href="examples/merge_clusters.csv">merge_clusters.csv</a></td>
<td>Optional file only needed when –mode=mergeCluster</td>
</tr>
</tbody>
</table>
<p>*Note: please avoid having spaces in your fcs file names.Feel free to use ’_’ instead of space.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
